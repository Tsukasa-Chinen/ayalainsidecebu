<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
	<link rel="stylesheet" href="./style.css">
</head>
<body id="search">
	<div class="wrapper">
		<div class="contents">
			<nav class="nav">
				<a class="nav__button on" href="./map.html"></a>
			</nav>
			<!-- /.nav -->
			<div class="search__list_wrapper">
				<div class="search__list_form">
					<input id="search_input" type="text" placeholder="行きたいお店の名前を入力してください">
				</div>
				<!-- /.search__list_form -->
				<div class="search__list">					
					<ul id="shop_list">
					</ul>
				</div>
			</div>
		</div>
		<!-- /.contents -->
	</div>
	<!-- /.wrapper -->
<script src="./jquery-2.1.4.min.js"></script>
<script src='./common.js'></script>
<script>
$(function(){

	/* JSON */
	$.getJSON('ayaladate.json' , function($jsonDate) {
		var $shopListElement = '';

		for(var $i in $jsonDate){
			for(var $j in $jsonDate[$i].shopinfo){
				$shopListElement += '<li data-shop-name="' + $jsonDate[$i].shopinfo[$j].name.replace(/\s/g, '-').toLowerCase() + '"><span>' + $jsonDate[$i].shopinfo[$j].name + '<img class="arrow" src="./arrow_r.svg"></span></li>';
			}
		}
		$('#shop_list').append($shopListElement);
	});
	
	/* Search Box */
	$('#search_input').on('keudown keyup keypress', function(){
		
		$('#shop_list li').css({'display': 'none'});
		
		var $searchVal = $(this).val().replace(/\s/g, '-').toLowerCase();

		if($searchVal != ''){	
			$('#shop_list li').each(function(){
				if($(this).data('shop-name').indexOf($searchVal) === 0){
					$('#not_found').css({'display': 'none'});				
					$(this).fadeIn();				
				}
			});
		}
    });
});
</script>
</body>
</html>
