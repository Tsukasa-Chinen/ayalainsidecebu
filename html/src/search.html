<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
	<link rel="stylesheet" href="./style.css">
</head>
<body id="search">
	<div class="wrapper">
		<div class="contents">
			<nav class="nav">
				<a class="nav__button on" href="./map.html"></a>
			</nav>
			<!-- /.nav -->
			<div class="search__list_wrapper">
				<div class="search__list_form">
					<input id="search_input" type="text" placeholder="行きたいお店の名前を入力してください">
				</div>
				<!-- /.search__list_form -->
				<div class="search__list">					
					<ul id="shop_list">
					</ul>
					<p id="not_found" class="search__not_found">Sorry, Not Found.</p>
				</div>
			</div>
		</div>
		<!-- /.contents -->
	</div>
	<!-- /.wrapper -->
<script src="./jquery-2.1.4.min.js"></script>
<script src='./common.js'></script>
<script>
$(function(){

	/* JSON */
	$.getJSON('ayaladate.json' , function($jsonDate) {
		var $shopListElement = '';

		for(var $i in $jsonDate){
			for(var $j in $jsonDate[$i].shopinfo){
				$shopListElement += '<li class="' + $jsonDate[$i].shopinfo[$j].name + '"><span>' + $jsonDate[$i].shopinfo[$j].name + '<img class="arrow" src="./arrow_r.svg"></span></li>';
			}
		}
		$('#shop_list').append($shopListElement);
	});
	
	/* Search Box */
	$('#search_input').on('blur', function(){
		var $searchVal = $(this).val();

		if($searchVal != ''){			
			$('#shop_list li').each(function(){
				if($(this).hasClass($searchVal)){
					$('#not_found').css({'display': 'none'});				
					$(this).fadeIn();				
				}else if(!$(this).hasClass($searchVal)){
					$('#shop_list li').css({'display': 'none'});	
					$('#not_found').fadeIn();				
				}
			});
		}
    });
});
</script>
</body>
</html>
