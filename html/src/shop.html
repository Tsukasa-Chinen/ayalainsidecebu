<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
	<link rel="stylesheet" href="./style.css">
</head>
<body id="shop">
	<div class="wrapper">
		<div class="contents">
			<nav class="nav">
				<span id="back_btn" class="nav__button on" data-page="map"></span>
			</nav>
			<!-- /.nav -->
			<div id="shop_list" class="shop__list">
			</div>
		</div>
		<!-- /.contents -->
	</div>
	<!-- /.wrapper -->
<script src='./jquery-2.1.4.min.js'></script>
<script src="./jquery.mobile.custom.min.js"></script>
<script src='./common.js'></script>
<script>
$(function(){

	/* JSON */
	$.getJSON('ayaladate.json' , function($jsonDate) {
		var $shopListElement = '';

		for(var $i in $jsonDate){
			$shopListElement += '<dl><dt>' + $jsonDate[$i].category + '</dt>';
			for(var $j in $jsonDate[$i].shopinfo){
				$shopListElement += '<dd class="js_shop_info" data-shop-id="' + $jsonDate[$i].shopinfo[$j].shopID + '" data-shop-floor="' + $jsonDate[$i].shopinfo[$j].floor + '">' + $jsonDate[$i].shopinfo[$j].name + '</dd>';
			}
			$shopListElement += '</dl>';
		}
		$('#shop_list').append($shopListElement);
	});

	/* back to Map */
	$(document).on('tap', '#back_btn', function(){
		movePage($(this).data('page'));
	});

	/* Send to Map */
	$(document).on('tap', '.js_shop_info', function(){
		sendShopInfo($(this).data('shop-id'), $(this).data('shop-floor'));
	});
});
</script>
</body>
</html>
